<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shattered-Star-POC</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
      font-family: monospace;
    }

    .screen {
      position: absolute;
      width: 100vw;
      height: 100vh;
      top: 0;
      left: 0;
      display: none;
    }

    .active {
      display: block;
    }

    .title-frame {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .press-enter {
      position: absolute;
      bottom: 5%;
      width: 100%;
      text-align: center;
      font-size: 2em;
      color: #00ccff;
      cursor: pointer;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    .menu {
      position: absolute;
      top: 60%;
      width: 100%;
      text-align: center;
      font-size: 2em;
      color: #00ccff;
    }

    .menu-item {
      margin: 15px 0;
      cursor: pointer;
      transition: color 0.2s;
    }

    .menu-item:hover {
      color: white;
    }
  </style>
</head>

<body>

<!-- TITLE SCREEN -->
<div id="title-screen" class="screen active">
  <img id="title-image" class="title-frame" src="assets/screens/title/title1.png">
  <div id="press-enter" class="press-enter">PRESS ENTER</div>
</div>

<!-- START SCREEN -->
<div id="start-screen" class="screen">
  <img class="title-frame" src="assets/screens/start/startscreen1.png">
  <div class="menu">
    <div id="new-game" class="menu-item">NEW GAME</div>
    <div class="menu-item">SETTINGS</div>
  </div>
</div>

<!-- NEW GAME SCREEN -->
<div id="newgame-screen" class="screen">
  <img class="title-frame" src="assets/screens/new-game/newgame1.png">
</div>

<!-- AUDIO -->
<audio id="intro-audio" src="assets/audio/intro.ogg" preload="auto"></audio>

<script>
/* ----------------------------------
   TITLE SCREEN ANIMATION LOOP
---------------------------------- */

const frames = [
  "assets/screens/title/title1.png",
  "assets/screens/title/title2.png",
  "assets/screens/title/title3.png",
  "assets/screens/title/title4.png",
  "assets/screens/title/title5.png",
  "assets/screens/title/title4.png",
  "assets/screens/title/title3.png",
  "assets/screens/title/title2.png"
];

let frameIndex = 0;
const titleImage = document.getElementById("title-image");

function animateTitle() {
  frameIndex = (frameIndex + 1) % frames.length;
  titleImage.src = frames[frameIndex];
}

setInterval(animateTitle, 150);

/* ----------------------------------
   AUDIO PLAYBACK
---------------------------------- */

const introAudio = document.getElementById("intro-audio");
introAudio.volume = 0.7;
introAudio.loop = true;

function enableAudio() {
  introAudio.play().catch(() => {});
}

window.addEventListener("click", enableAudio, { once: true });
window.addEventListener("keydown", enableAudio, { once: true });

/* ----------------------------------
   SCREEN SWITCHING
---------------------------------- */

function showScreen(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* TITLE → START */
function goToStart() {
  showScreen("start-screen");
}

document.getElementById("press-enter").addEventListener("click", goToStart);

window.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    goToStart();
  }
});

/* START → NEW GAME */
document.getElementById("new-game").addEventListener("click", () => {
  showScreen("newgame-screen");
});
</script>

</body>
</html>
