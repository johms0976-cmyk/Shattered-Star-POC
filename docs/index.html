<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shattered-Star-POC</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
      font-family: monospace;
    }

    .screen {
      position: absolute;
      width: 100vw;
      height: 100vh;
      top: 0;
      left: 0;
      display: none;
    }

    .active {
      display: block;
    }

    .title-frame {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .press-enter {
      position: absolute;
      bottom: 5%;
      width: 100%;
      text-align: center;
      font-size: 2em;
      color: #00ccff;
      cursor: pointer;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    .menu {
      position: absolute;
      top: 60%;
      left: 10%;
      font-size: 2em;
      color: #00ccff;
    }

    .menu-item {
      margin: 15px 0;
      cursor: pointer;
    }

    .menu-item:hover {
      color: white;
    }

    /* GLITCH OVERLAY */
    #glitch {
      position: absolute;
      width: 100vw;
      height: 100vh;
      background: white;
      opacity: 0;
      pointer-events: none;
      mix-blend-mode: screen;
      z-index: 999;
    }

    @keyframes glitchFlash {
      0%   { opacity: 0; transform: translate(0,0); filter: none; }
      15%  { opacity: 1; transform: translate(-5px, 3px); filter: hue-rotate(30deg); }
      30%  { opacity: 0.6; transform: translate(4px, -2px); filter: contrast(2); }
      50%  { opacity: 1; transform: translate(-3px, 1px); }
      70%  { opacity: 0.4; transform: translate(2px, -3px); }
      100% { opacity: 0; transform: translate(0,0); }
    }

    /* MAP */
    #map-screen {
      background: black;
    }

    #map-canvas {
      width: 100%;
      height: 100%;
    }

    .node {
      position: absolute;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: black;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
    }

    .node.combat { background: #b33; }
    .node.event  { background: #338; color: white; }
    .node.elite  { background: gold; }
  </style>
</head>

<body>

<!-- TITLE SCREEN -->
<div id="title-screen" class="screen active">
  <img id="title-image" class="title-frame" src="assets/screens/title/title1.png">
  <div id="press-enter" class="press-enter">PRESS ENTER</div>
</div>

<!-- START SCREEN -->
<div id="start-screen" class="screen">
  <img class="title-frame" src="assets/screens/start/startscreen1.png">
  <div class="menu">
    <div id="new-game" class="menu-item">NEW GAME</div>
    <div class="menu-item">SETTINGS</div>
  </div>
</div>

  <!-- NEW GAME SCREEN -->
<div id="newgame-screen" class="screen">
  <img id="newgame-image"
       class="title-frame"
       src="assets/screens/new-game/newgame1.png">
</div>

<!-- COMBAT SCREEN -->
<div id="combat-screen" class="screen"></div>

<!-- MAP SCREEN -->
<div id="map-screen" class="screen">
  <canvas id="map-canvas"></canvas>
</div>

<!-- GLITCH -->
<div id="glitch"></div>

<!-- AUDIO -->
<audio id="intro-audio" src="assets/audio/intro.ogg" preload="auto" loop></audio>

<!-- =========================
     TITLE ANIMATION (SAFE)
========================= -->
<script>
  const frames = [
    "assets/screens/title/title2.png",
    "assets/screens/title/title3.png",
    "assets/screens/title/title4.png",
    "assets/screens/title/title5.png",
    "assets/screens/title/title4.png",
    "assets/screens/title/title3.png"
  ];

  let frameIndex = 0;
  const titleImage = document.getElementById("title-image");

  function animateTitle() {
    frameIndex = (frameIndex + 1) % frames.length;
    titleImage.src = frames[frameIndex];
    setTimeout(animateTitle, 150);
  }
  setTimeout(animateTitle, 150);
</script>

<!-- =========================
     AUDIO ENABLE (SAFE)
========================= -->
<script>
  const introAudio = document.getElementById("intro-audio");
  introAudio.volume = 0.7;

  function enableAudio() {
    introAudio.play().catch(() => {});
  }

  window.addEventListener("click", enableAudio, { once: true });
  window.addEventListener("keydown", enableAudio, { once: true });
</script>

<!-- =========================
     BOOTSTRAP GAME
========================= -->
<script type="module" src="main.js"></script>

</body>
</html>
